HexEdit Revision History

01/14/03 1.87
Fixed icon for main app (can't include during build, must copy/paste...no idea why)
Give time for compare events to arrive before showing open file dialog
New test file in documentation folder shows how to have HexEdit compare files via AppleScript
Added compare options to specify fork in AppleScript (with option "rsrc"/"data")
Fixed crash if an AppleScript tried to compare a file to itself, now returns duplicate file error

12/05/02 1.86 (no public release)
Enhanced selection hilight code to work more like finder & w/all colors
Cut/Copy/Paste/Clear menu items are now availabe in dialogs (ie, Find)
Cut/Copy/Paste keys work again in dialogs under Mac OS X
Fixed ability to cancel search/compare ops (broke by speed increase!)

10/31/02 1.85
re-wrote the search routine to get a 100x speedup! (650MB search in 1.25 minues vs 120+)
	(now manages chunks directly, and chunks are now 128K instead of 30K each)
re-wrote file comparison routines in same manner as new search code
only a single file comparison routine (instead of one for match and one for diff)
Outlines are in grey instead of black, which works better for any color scheme
re-wrote the selection hiliting code to come out closer to selection hilite in textedit
    Due to multiple color lines we can't use "hilite" mode for "InvertRect"
    so I used a strange pen mode, the hilite color and got pretty close. Doesn't work
    for all color schemes, just like text edit's hilighting. Still, pretty close & looks better!
Files used to be limited to one chunk in memory at a time (although the system seemed designed for
    more than that). Now there can be multiple chunks, and each file is limited to a total RAM limit
    for loaded chunks (1MB on carbon, 128K on other systems). This should speed up some editing.

08/18/02 1.81 (cvs only, no official release)
Added a new entry (Divider Lines) to the color schemes (per Uli, plus Sage and Aqua schemes)
Moved Color Schemes and templates to seperate file
Moved About box and related resources to seperate file
About box now uses "auto scroll" control, fixes OS X stagger, left basic code in for 68K build.
  (Uses either appearance or normal about resources, depending on runtime.)
Fixed bad use of special menu chars in window/menu strings
Show errors opening files w/drag & drop open (but not print)
Used FSGetCatalogInfo to preserve unix permissions (and who knows what else :)
Only use AppearanceManager 1.1 (from Mac OS 8.5 on) which have functionality we need
Color menu checkmark now shows color of current window (instead of global setting)
  (also fixes bug of double-selecting a color turning checkmark off)
No more "default" color, that's now Ocean and "Aqua" is now the default (much nicer scheme!)


04/29/02 1.80
Removed per-window offscreen drawing surface
	(a single color capable offscreen is now used for all windows)
Single offscreen means memory usage goes WAY DOWN, a very good thing
Single offscreen means flickering of selection no longer happens
Single offscreen means slower drawing speed, only noticable on older Macs
Re-arranged the distribution files for a cleaner layout that is more user-friendly
Windows zoom is now restricted to full line height at window creation
Open/Save dialogs now get prompt at load, including Nav dialogs!
Re-layed out window to handle files of huge size (ie, 8 chars for hex addresses!)
Re-layed out header to reflect larger file size handling (8 chars per hex address!)
Positioning of vertical lines now relative to body draw position (in code)
Major re-arrangement of EditWindow.c to be easier to follow
Windows no longer grow below bottom of screen
Fixed problem where data file w/no resource fork didn't display correct error message
Cleaned up some opening code (to not duplicate functionality)
Fixed a few memory leaks when failing to open a file's fork
Fixed a possible condition that could leave files open
No longer resize the window when you try to re-open an open file
Max window sizes now take into account the doc in OS X
Fixed update of outline in ascii area, bottom right edge was 1 pixel short
Added an error specific to saving files when the original is moved or deleted
Updated error message on missing resource forks so explain what's happening
Scrolling speed of drags now gets faster the further from the window the mouse goes
Fixed cut not copying selection deleted; it does now, just like copy :)
Windows open to better default sizes now
Alerts now belong to the window from which the error occurs
File compare now uses currently open windows by default, when available
Holding "Option" when selecting Compare Files menu option forces file selection dialogs
Menu routines now passed the key modifiers state (see above, below)
Holding "Option" when selecting a color will change the color of only the front window
By default, changing the color now changes the color of all open windows!
You can now go to the start/end of a file with Option-Up/Option-Down (Home/End)
New option to cause page up/down to  only move display, not change edit cursor position
Comparison mode now allows available menu command keys to work
Non-Destructive delete in insert mode is now just that, non-destructive!
Now accept "Clear" key and Option-Delete to "clear" a selection to zeros
Added seperate color entry for dark body color (was based on bar color previously)
Added a few new colors, and updated some of the other colors
	(sure wish someone would create a set of colors that looked good :)
Minimum Window size is now 10 lines
Added EF's changes to the way window clicks are handled, for better OS X usage
Added EF's carbon events code to allow mouse wheel to scroll window contents
Trying to go to an address outside of the window's file size signals error with a beep
Optimized some calculations of window display position
When scrolling in very large files we now always position to the first byte of a display line
Fixed problem with tabbing between hex and ascii fields, (boolean ops on non-booleans bad) 
most enums are now typedefs so they can be used as data types (see above fix for example :)

<unreleased> 1.77
Incorporated file compare window changes from Nick Pissaro
Major re-arrange of main.c to be easier to follow
Removed all "CompareFlag" references, now pass type of window to functions
	(effects SizeWindow, file open routines, etc.)

03/20/02 Version 1.76
fixed DisposeChunk to check for NULL window (fixes replace all crash) thanks to Ben H.
fixed printing in classic (removed check for error on PrValidate, it doesn't return errors)
about box now invalidates rect in carbon build to try and get better speed in os x
carbon precompiled header include now from carbon support folder
updated project to have carbon builds look in carbon support folder first
error alert into debugger updated for new universal headers
fixed about dialog box scroll speed in OS X (speed now based on time elapsed)
updated all source to include CVS version/edit information
updated copyright dates
prefs now set vertical bars on by default
created new default color scheme (slightly modified turquoise)
color is now on by default
updated pref version # to force above prefs changes on everyone :)

12/17/01 Version 1.75
Added Replace and Replace All functionality! (Available the Find dialog)
Can no longer open files twice
All file access is now thru FSp calls
	(saves code and allowing all machines to open files starting with periods)
Updated file open error message to reflect likelyhood of already open files
Empty fork warnings now work!
		(ie, if a fork is empty, you are warned about the fact before it is opened)
Use a Carbon v1.1 function just to require that version or later.
		(this is an attempt to fix the crash under CarbonLib v1.0.x)
Adjusted position of elements in file compare prefs dialog for OS X
Added OS X Project Builder project (compiles, links, starts runs, but can't debug)
Fixed bad sizing of scroll bars
Fixed problem with scroll thumb moving when clicked on (but not dragged)
Compare files now uses an open window if existing for a selected file
Adjusted sizing of compare windows
Adjusted size of HexEdit windows, fixing 10th column being squashed
Added NEW pentagram icon by Lane Roathe
Adjusted speed of about box text for MacOS X (Carbon)
Adjusted find/replace dialog for MacOS X

8/12/01 Version 1.74
added live scrolling (based on code sent in by Brian Bergstrand <brianb@classicalguitar.net>
Cleaned up ControlActionProc, now properly local
major cleanup to live scrolling code (added CalcScrollPosition)
Fixed not saving resource fork when updating files
Fixed not setting EOF when saving files
Fixed infinite loop when swapping search dialog to back w/invalid data
Fixed crashing about box (although it may be that the fix was a new CarbonLib!)
Fixed crash when closing one of the compare files windows
Added some compile-time checks for 68K and non CW items
NEW option to copy data unformatted:
	formatted (default) = AA AA AA
	unformatted (option) = AAAAAA
(NOTE: only applies to HEX copies, ASCII copies always copy raw binary data!)
Cleaned up some scrap usage in carbon builds
Window dirty flag is set at lowest modification levels instead of a bunch of higher levels
NEW option, "Non-Destructive Delete" which is only available in overwrite mode
	(when editing this mode causes "Delete" to zero the byte behind the cursor,
		or the current selection if there is one, instead of deleting the byte/selection).
Added a few "spare" pref enteries so that we can add prefs w/o reseting them in future builds

6/6/01 Version 1.72
Modified options menu to be a bit more understandable
Find menu options now match dialog buttons
Fixed scroll limit calculations so that all lines are always visible & scroll bar set correctly
Fixed erasing of undrawn area to erase partial ending of lines (ie, when window not limited to full lines)
Removed all &0xFFFFFFF0 && << 4 references since we may not always have 16 bytes per line
Find forward/back are now disabled if edit window not in front, is empty or search string is empty
Revert now puts up a dialog to confirm revert since it zaps all changes
Movement keys to before/after file now deselect if shift not pressed
Filenames in menus/windows are now stripped of bad characters
	(meaning that displayed names may not exactly match, but won't break app either!)
searchWin & gotoWin are now searchDlg and gotoDlg since they are dialogs
Reverting a file now sets the file as unchanged
Switching from the find dialog to an edit window now sets the search text
Removed duplicate error alert resource (it was unused)
Icon used in dialogs has been changed for consistancy with standard applications
Partially hidden line at bottom of window now reflected in selection inversion
Changed Redo Delete to Redo Editing (cause delete almost never made sense)
Added a colon after Len in hex status bar
Tested on 7.6 PPC (non-interface or appearance) and 7.55 68K machines ... works now!
HEct template is now for Resourceror by default
Added font face/size STR# resource
Drawing routines can now work w/most any mono font and size!
Enlarged many dialog controls to account for stupidly large size of OS X font!
Increased the search speed under Carbon even more by only checking for aborts every 4K bytes
Fixed non-appearance open dialog usage (caused crash on 8.1 and older systems)
Made InternetConfigLib,NavigationLib,AppearanceLib, and InterfaceLib weak linked
Added a few new contributors to the about box
Undo/Redo is no only available for the window the change was made for
Undo buffer is now disposed when corresponding window is closed
Fixed editing an empy fork (ie, a new file) displaying garbage in first line
Fixed saving files when backups were on (temp files now use ^ suffix, backups use ~ suffix)
Fixed "find again" not search for second item (plus cleaned up code)
Fixed slowness of find, it was over agressive on the CheckForAbort call, now 15x as fast
Fixed ability to click on first two characters of the ASCII data column
Improved click sensitivity withing the Hex data column (esp. for last hex byte)
Implemented Nick Shanks's v1.71 changes relating to selecing Appearance or standard window
Implemented Greg Branche's changes (a few bug fixes and MPW build capability!)
Minor code cleanup and interface tweaks

4/15/01 Version 1.70
Fixed many bad uses of a WindowRef as a DialogRef (ie, if dialogRef == FrontWindow() fails on OS X!)
	(As a side note, this also fixe the not pasting on entry...very cool!)
Changed all uses of "FrontWindow" to "FrontNonFloatingWindow" in carbon builds
	(sourcce is all this usage, but non-carbon builds macro out to FrontWindow)
Fixed printing (and prettied it up a bit in the process)
Fixed menus not being set after AppleEvent opens, closes
Navigation (open/save) dialogs no longer system modal
Reset the cursor on entry to About dialog
Renamed HiOrder ASCII to Show Extended Chars
Fixed cursor selection
Fixed printing (actually non-printing) of 0x7F chars
Window menu updated after any open/close of editing window
Fixed searches to look at EOF before starting, and >= instead of ==
Pasting to Carbon build no longer crashes, but on entry can't paste (can w/switch)
Added routine to set window name
window names now include fork info (fixes window menu confusion bug as well)
Removed fork info from header, replaced with selection length
Check for cmd-. in file comparison
Window proc is now 1031, not 8 (might not work for non-appearance systems)
Removed DrawGrowIcon call in update, fixes very minor flash in updates
Fixed window menu selection code to avoid crashing w/null access if window not found
Created new routine to set window name
Window names now reflect if they are the data or resource window
Added a new routine to menus to get a menu item corresponding to a window
Moved the version resources to their own file
Modified the project to set the correct flags in release builds (custom icon, etc.)
Fixed a bad (Boolean) conversion with the menu code, which was causing "Edit Other Fork" to
	fail to find an existing window on occasion (if the last byte happened to be '00') because
	it coerced a Handle into a Char!
Fixed all the lines per page calculations! Many a bug are fixed :)
	(inspired by Scott, who sent in a try at a printed page lines per page fix)
Printing errors in Carbon now report error code
Removed MaxWindowHeight constant since this is calculated now
Renamed MaxWindowWidth to HexWindowWidth since it's a constant (not sizeable)
Added new pref, partialLines, to control constraining window resizing to full lines (or not)
Fixed zoom to be 1/2 height, not moving to the right ... huh?
Min window height no longer based on scroll bar size (not there!)
Major cleanup to the drawing code ... what a mess :(
Got tired of not knowing what was a constant and what wasn't (use kConstant, MACRO)
Dang, SBarSize was being used for the # of bytes per line! Fixed!
Added Zoom ability to carbon build
Fixed Zoom - it was flat broke! (no idea why moving it right was considered a "zoom")
	(note: Window's actually start fully zoomed, and zooming unzooms...should this be changed?)
Merged in Scott E. Lasley's printing code (what a guy!)
Prettied up a bit of drawing/printing output
First pass at cleaning up printing code so printing is actually usable :)
Made a few local routines static and renamed to _functionName format
Fixed about box not handling URL clicks (forgot to check in AboutBox.h)
Fixed NULL window ptrs to CarbonLib in UpdateMenus (g.searcWin, etc.)

02/13/01 Version 1.66
Fixed bad conversion of undo records to pointers (reverted to records)
Fixed various NULL reference potentials having to do with using FrontWindow
Fixed a few bogus uses of ObjectWindow refs from a non-edit window via GetWRefCon
Added ability to cancel searches with Command-. or Escape
Removed the last of the english strings to the resource file
Re-wrote unique name routine to create more readable filenames
Display new window filenames (instead of a bogus generic name)
Fixed new windows not being able to edit other fork (fsSpec not initialized!)
Cleaned up sources for SourceForge CVS & added license comments
New text files and names for easier use
New directory structure for SF
Merged Nick Shanks 1.66
URL's now attached to About links
FAT Carbonized application
Fixed SaveAs problem (and made sure no lingering (EditWindowPtr) coersions existed!)
Fixed Goto/Search dialog paste crashes (involved re-writing HandleMenus!)
Nick Shanks added a Window menu
Option menu was re-arranged a little
Moved mac_Offscreen code to EditWindow.c
Nav services dialogs are now movable modal
Pressing TAB switches the edit cursor between the Hex and ASCII panes
Added the ability to click on the URL's in the about box to launch a web browser
Added Fat Carbon post-linker to the FAT build, so that it builds an intelligent FAT app
		(note: I licensed Fat Carbon for HexEdit, so it's legal to ship with this :)
Nick Shanks seperated the headers out into more relavent files
Added the licensing text to each source file for SourceForge distribution
Re-arranged the directory structure to help with CVS distribution
Re-arranged some of the support text files for CVS distribution
Icons are now a seperate resource file so that you can create/choose what you like
Some very  minor bugs and code cleanup went on as well

01/01/01 Version 1.65
Re-arranged menus, thanks to Stephane Moureau for the suggestion!
Comparing a file against itself is no longer allowed! (Stephane Moureau)
Lines per page count was one short, fixed
	(found via bug where select all didn't select last line, per Stephane Moureau)
Find dialog disables Match Case option for hex cause you can't match case in hex
	(per Stephane Moureau)
File Compare no longer retries selections if canceled at second selection.
	(per Stephane Moureau)
Pasting bad information no longer creates an undo event (per Stephane Moureau)
The "debug" button was removed from the main error dialog.
		(Press "OPTION" when clicking the dismiss button to drop into the debugger.)
		(Of course, if you don't have a debugger you will crash!)
All alerts and dialogs were cleaned up to conform to UI guidelines and not be so ugly :)
Edit other Fork & Compare files options are now in the File menu, where they make sense
Renamed some other menu items to make things a bit more logical
Fixed a weird problem with files being disposed of during editing. How'd that happen?!?
Spelled Avocado correctly (per Stephane Moureau)
Goto Address was messing with the "Address:" text as a user item, for reasons unkown to me.
Goto dialog is now modeless :)
Find dialog now ALWAYS has find buttons disabled if no text entered :) (dang global vars!)
Cleaned up references to and use of dialog and alert ID's
Hi Order ASCII option was not being set on load (per Toru Yoshizawa)
Print menu text now now in a resource (STR# 129) to enable localization
	(per Jean-Jacques Cortes)
Pretty new icons provided (including 32 bit) by Jean-Jacques Cortes!
'dlgx' resources now included to make HexEdit appearance manager friendly
	(per Jean-Jacques Cortes)
Labeled string resources to make localization task easier
Display selected area (start and stop, both same for position with no selection).
	Suggested by Adrian Walti
Added 'Home' and 'End' keys to go to beginning and end of file respectively
Changed selection update method to always update header
Updated the readme file to be accurate with all the changes
Changed version and readme files to times and added some styling for readability
Re-wrote the copy/paste functionality for better system performance and Carbonization
Changed the manner in which copies operate:
	Hex side copies ASCII hex, binary side copies binary (raw) data
	Hex side always pastes binary, binary side pastes raw clipboard
	(ie, hex copy pastes ascii rep in binary colum)
	("bad" ASCII hex representation will paste as binary data instead of erroring out)
Removed the "shift-copy" feature, since we now have this automated method
Color selection is only enabled for valid windows.
	(ie, a B&W window can't be changed to a color window!)
Header strings now in STR# resource for localization
Error strings now in STR# resource for localization. Also contain more information
	(like the error code :)
Fixed window proc id (not sure how it got messed up)
Goto Address menu option is how Cmd-J (to conform to CodeWarrior and other "standards")
Find and Goto dialogs now remember position within a single run
	(positions NOT saved between runs)
Adjusted window size to always show complete lines by default (David Emme)
Fixed "Edit Other Fork" opening a new window instead of selecting a open window
	(Stephane Moureau)
Fixed headers drawing in incorrect color during background updates
Fixed minor menu enabling glitch when no windows were open
Disabled the printing options under Carbon until I get Carbon/OS X printing working
Added really cool new about box!
	(Now contributors can get their names listed where everyone sees them :)


09/23/00 Version 1.6 (never released publicly)
First pass at Carbonization! Scrap & Printing needs finishing, and I'd like make it superfat.
	Thanks to Nick Shanks and George Warner for their efforts in Carbonizing HexEdit!
Carbon version uses Navigation Services.
Many intrnal modifications to the code for Carbon compatibility
Fixed (for good?) the bad case of opening files (-34). For some reason, having the check
		for locating a unique filename withing the "while" statement caused the error
		to be ignored at times, and then a bogus random name would be created.
Fixed lock up when the find window or compare dialog was open.
Added optional vertical bars (based on mod sent by David Emme)
Find dialog is not visable during setup
Find dialog buttons no longer flicker (thanks to Max Horn)
Find dialog accepts return or enter as acceptance
Updated to CWPro 6 (for ease of Carbon support)
Optimization level now set to max and smaller code size.

05/10/00 Version 1.5
Made promise to self to update HexEdit web site so people know I actually work on HexEdit :)
Moved all preferences to prefences structure.
Made preferences actually work. (can't believe this bug was never reported!)
Fixed bug w/appending ~ to max length filenames (temp files, reported by Ritchie)
Fixed memory leak in DisposeChunk (reported by Nick Shanks)
Finally found where the bogus errors were being generated on file opens & fixed it!
		(historical note; the routine to ensure unique temp filenames was very buggy)
		(darn: still a bug w/opening new windows returning an error -34 on occassion)
Integrated modifications by Nick Shanks (appearing in Nick's 1.3 release):
		Made search buttons disable when there's nothing entered for which to search
		Shifted scroll bar, removed footer and tidied up code
Added Color Schemes, based on idea by Nick Shanks. Off by default due to memory usage
		(historical note: it's a bad idea to use "SetPortBits" on color windows!)

You can create/edit color schemes by editing the 'HEct' resources in HexEdit. If you create a cool scheme and want it included in the next HexEdit release, just send me the scheme's 'HEct' resource.

Note: Using color windows takes 8Ñ32 times as much memory! So, if you are short on memory, have a large desktop (1024x768 or higher) or want lots of open windows, turn "Use Color" off (ie, it's not checked) before opening windows. HexEdit will remember your color usage preference the next time it is launched.

11/30/99 Version 1.4.3
Fixed system hilight color support reported by Tim Herzog.
Added Tim's ASCII cut/copy mod. From Tim:

ÒBasically if you hold down the shift key when you cut/copy, it copies the selection to the system scrap in ASCII not in binary, so the TEXT scrap resembles the display in HexEdit.  It's handy when you want to copy the asii representation, not the pure binary.Ó

8/19/99 Version 1.4.2
Fixed bug reported by Jean-Pierre Melkonian (don't test for case in hex searches!)

6/5/99 Version 1.4.1
Fixed bug reported by Jonathan Write, where deleting text could corrupt a file
Improved menu operation, as reported by Aaron D. (ie, open works w/find dlg active)
Updated to CWPro 5 and turned on optimizations for PPC build

8/31/98 Version 1.4
Preferences are now saved in the active system preferences folder
Changed "ignore case" to be the default search method
Some interface cleanup
A few VOODOO integration adjustments
Fix "Edit Other Fork" option

7/16/98 Version 1.3.1
Added "ignore case" option to Find dialog.
Fixed HexEdit's use of CPU time (was always 99%), now it's 5% foreground, <1% background)
If activated w/file compare windows open, display file compare dialog.
	(ie, if VOODOO activates us to show differences, then replicate Compare Files operation.)
Open Dialog is back at startup, but only if not started up to do a file compare.
Removed a few DebugStr's that could confuse users

6/24/98 Version 1.3
Added support for VOODOO AE compare suite.
HexEdit no longer starts up with the open file dialog (required by above change)

4/19/98 Version 1.22
CWPro r3 project
Fixed a few bugs related to empty data/resource forks
	(still a few hard-to-fix ones remaining, but should no longer crash.)

8/2/97 Version 1.21
CWPro r1 multi-target & MSL re-compile (added 15K too, sigh)
Fixed a crash bug when trying to insert data into an empty fork
Added warning to potential future crash bugs (should never occure)
Sources no longer require OLDROUTINENAMES to compile

6/6/96 Version 1.2
Now a "fat" application, sources Universal Headers happy
Add better file compare, allow setting compare options
Add ability to switch between both forks of a file
Remove all warnings from the compile
Fixed a few bugs relating to Power PC usage

11/9/95 Version 1.1  (unreleased)  
(note: Dave Polaschek also released a "fat" v1.1!)
Compiles with CodeWarrior
First pass at "file compares"

--- These are Jim Bumgardner's original revision comments ---

9/25/94 Version 1.0.7
Fixed bug: scroll bars weren't deactivating on deactivate event
Allows Quit and Close while Search Dialog is open.
Added 'BINA' file type to bundle.

9/22/94 Version 1.0.6
Fixed cosmetic bug that caused multiple window refreshes to get mixed up (if
	you had more than one window open, the wrong contents would be dislayed
	when you switched from one window to another and clicked in the window).

12/14/93 Version 1.0.5
Fixed editing bug that occured when you typed in some chars, then positioned
	the insertion point to the beginning or the middle of those chars and deleted a char.

12/13/93 Version 1.0.4
Fixed bug that caused HexEdit to crash on SEs, Portables, and other B&W macs.
Fixed scrolling bug that occurred on very large files.
Improved redrawing speed on very large files.
Eliminated cursor flashing when HexEdit is in background.
Greys out menus when windows are closed.
Added Freeware message to about box.

9/10/93 Version 1.0.3
Fixed a couple nasty bugs that caused HexEdit to behave erratically on files 
	that couldn't fit in memory.  The bug caused HexEdit to crash and not save
	these files properly.

8/30/93
Cmd-W Closes Find Window
Removed ellipses from New menu item
Edit+Find menus dim appropriately

8/23/93
Changed ok button to say "Goto" instead of "Search" on goto dialog.
Changed Cmd-Key shortcuts to be more MPW compatible
Fixed some menu items to disable when windows are closed
Added Select All
Added better About Box
Fixed Cursor I-Beam problem.

7/8/93 Version 1.0.2
Changed length display to decimal when appropriate
Fixed resizing window bug
Removed "preferences" from edit menu
Made checkmark preferences permanent
Added Backup File toggle
Added support for Zoom Box.
Windows can be resized up to max size.

7/6/93 Version 1.0.1
Removed dependence on system 7, 32-bit quickdraw.
Fixed bug with radio buttons on open file dialog.
Sped up display for selecting.

7/4/93
Added Overwrite toggle switch
Added Goto Address

7/2/93
Added Ascii/Hex Search

7/23/93
Version 1.0 Released
